<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Praktisk information</title>

    <link rel="stylesheet" href="infoStyle.css">
    <link rel="icon" type="image/x-icon" href="../assets/images/logo.ico">

    <style>
        /* --- Security Styles --- */
        /* This ensures the page is blank until we verify the user */
        #access-denied {
            display: none;
            height: 100vh;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background-color: #f4f4f4;
            font-family: sans-serif;
            padding: 20px;
        }

        /* Hide the main website content by default */
        #main-content {
            display: none;
        }

        /* --- Dynamic Text Styles --- */
        /* Hidden by default, shown via JS based on guest list */
        .dynamic-singular,
        .dynamic-plural {
            display: none;
        }
    </style>
</head>

<body>

    <div id="access-denied">
        <h1>Adgang nægtet</h1>
        <p>Vi kunne ikke finde din invitation.</p>
        <p>Gå venligst tilbage til forsiden eller scan din QR-kode igen.</p>
    </div>

    <div id="main-content">
        <div class="hero-header">
            <a href="../" class="header-icon-link">
                <img src="../assets/images/logo.png" alt="Site Icon" class="header-icon">
            </a>

            <nav class="navbar">
                <button class="burger-button" id="burger-toggle">
                    <span class="burger-line"></span>
                    <span class="burger-line"></span>
                    <span class="burger-line"></span>
                </button>

                <ul>
                    <li><a href="../">Brylluppet</a></li>
                    <li class="active"><a href="index.html">Praktisk information</a></li>
                    <li><a href="../Galleri/">Galleri</a></li>
                    <li><a href="../RSVP/">RSVP</a></li>
                </ul>
            </nav>
        </div>

        <div class="spacer layer1"></div>



        <section class="content">
            <h2 class="animate-from-left">Overnatning</h2>

            <div class="iconImage-container animate-from-left delay-100">
                <img src="../assets/images/bedIcon.png" alt="Bed Icon">
                <img src="../assets/images/moonIcon.png" alt="Moon Icon">
            </div>

            <p class="animate-from-left delay-200">
                Der er gode muligheder for overnatning på Ho Feriecenter kun
                <span class="tooltip">5 minutters gang
                    <span class="tooltiptext">
                        3 min. i Agerskov tempo <br />
                        10 min. i beruset tilstand <br />
                        7 min. i kørestol
                    </span>
                </span>
                fra kroen,
                <a href="https://maps.app.goo.gl/GEeQLELmDDF3KA6W8" target="_blank">
                    Hovej 4, 6857 Blåvand.
                </a>
            </p>

            <p class="animate-from-left delay-300">
                Kroen har en specialaftale med Ho Feriecenter,
                hvorved der kan bookes overnatning for en nat i ferielejlighederne. <br />
                Der i aftalen tilbydes tre forskellige størrelser ferielejligheder, der alle indeholder et køkken og
                badeværelse:
            </p>

            <ul class="animate-from-left delay-400">
                <li>
                    2-mands hytte koster 850,-
                    <a href="https://www.ho-ferie.dk/overnatning/feriebolig/hus-type-8/" target="_blank">
                        (hustype 8)
                    </a>
                </li>
                <li>
                    6-mands hytte koster 1.050,-
                    <a href="https://www.ho-ferie.dk/overnatning/feriebolig/hus-type-7/" target="_blank">
                        (hustype 7)
                    </a>
                </li>
                <li>
                    8-mands hytte koster 1.250,-
                    <a href="https://www.ho-ferie.dk/overnatning/feriebolig/hus-type-10/" target="_blank">
                        (hustype 10)
                    </a>
                </li>
            </ul>

            <div class="animate-from-left delay-500">
                <div class="dynamic-singular">
                    <p>
                        Ønsker du at booke en overnatning, så skal du sende en mail til Ho Kro på
                        <a href="mailto:hokro@hokro.dk">hokro@hokro.dk.</a>
                    </p>
                </div>
                <div class="dynamic-plural">
                    <p>
                        Ønsker I at booke en overnatning, så skal I sende en mail til Ho Kro på
                        <a href="mailto:hokro@hokro.dk">hokro@hokro.dk.</a>
                    </p>
                </div>
            </div>

            <p class="animate-from-left delay-600">
                Hvis man ønsker at overnatte til en overkomlig pris, giver det mening at gå sammen flere om en hytte.
                Hvis man er interesseret, men ikke ved hvem man skal gå sammen med kan man skrive til os og vi kan måske
                hjælpe med at matche folk.
            </p>

            <p class="animate-from-left delay-700">
                <strong>Bemærk</strong> at man selv skal medbringe sengelinned og håndklæder. <br />
                Alternativt kan det tilkøbes ved at sende en mail direkte Ho Feriecenter på
                <a href="mailto:info@ho-ferie.dk">
                    info@ho-ferie.dk.
                </a>
            </p>
        </section>

        <section class="content">
            <h2 class="animate-from-left">
                Gaveønsker
            </h2>

            <div class="iconImage-container animate-from-left delay-100">
                <img src="../assets/images/skyIcon.png" alt="Cloud Icon">
                <img src="../assets/images/giftIcon.png" alt="Present Icon">
            </div>

            <div class="animate-from-left delay-200">
                <div class="dynamic-singular">
                    <p>
                        Selvom din deltagelse er en gave i sig selv, vil vi gerne bidrage til at dreje kapitalismens
                        hjul.
                        Derfor ønsker vi os særligt tilskud til oplevelser og ting til at bygge rede af.
                        For mere præcision kan man følge
                        <a href="https://onskeskyen.dk/s/d4xcqs" target="_blank">
                            linket til vores ønskesky.
                        </a>
                    </p>
                </div>
                <div class="dynamic-plural">
                    <p>
                        Selvom jeres deltagelse er en gave i sig selv, vil vi gerne bidrage til at dreje kapitalismens
                        hjul.
                        Derfor ønsker vi os særligt tilskud til oplevelser og ting til at bygge rede af.
                        For mere præcision kan man følge
                        <a href="https://onskeskyen.dk/s/d4xcqs" target="_blank">
                            linket til vores ønskesky.
                        </a>
                    </p>
                </div>
            </div>

        </section>



        <section class="content">
            <h2 class="animate-from-left">
                Indslag
            </h2>

            <div class="iconImage-container animate-from-left delay-100">
                <img src="../assets/images/micIcon.png" alt="Mic Icon">
                <img src="../assets/images/maskIcon.png" alt="Mask Icon">
            </div>

            <p class="animate-from-left delay-200">
                Vi vil elske, at folk vil lave nogle indslag. Vi ser helst taler holdes under ti minutter. 
                Til at styre slagets gang har vi allieret os med de bedste.
                Har man lyst til at bidrage med et indslag, bedes man venligst række ud til en af vores toastmasterer:
                
            </p>
        </section>

        <section class="image-slide-section">
            <div class="image-container">
                <img src="../assets/images/boxRing.png" alt="Base Image" class="base-image">
                <img src="../assets/images/boxStats2.png" alt="Overlay Image" class="overlay-image">
                <div class="boxer-group left-group">
                    <img src="../assets/images/mikkelBoxer.png" alt="Left Boxer" class="boxer-image">
                </div>

                <div class="boxer-group right-group">
                    <img src="../assets/images/borkBeats.png" alt="Right Boxer" class="boxer-image">
                </div>
            </div>
        </section>

        <div class="spacer2 layer2"></div>


        <footer>
            <p>© 2025 Anne & Torben. All rights reserved.</p>
        </footer>
    </div>

    <script src="../script.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Animation Observer Logic
            const imageContainer = document.querySelector(".image-container");
            if (imageContainer) {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            imageContainer.classList.add("animate-now");
                            observer.unobserve(imageContainer);
                        }
                    });
                }, { threshold: 1 });
                observer.observe(imageContainer);
            }

            const scrollObserverOptions = {
                threshold: 0.15,
                rootMargin: "0px 0px -50px 0px"
            };

            const scrollObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('in-view');
                    } else {
                        entry.target.classList.remove('in-view');
                    }
                });
            }, scrollObserverOptions);

            const animatedElements = document.querySelectorAll('.animate-from-left');
            animatedElements.forEach(el => scrollObserver.observe(el));
        });
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", async () => {
            const params = new URLSearchParams(window.location.search);
            const uid = params.get("uid");

            // List of Singular Guests
            const singular = [
                "A55wFTf", // Peter
                "58HBunqMnD11aC", // Inger Lise
                "9jTLnAp", // Mette
                "9jMQ9Ex", // Maria
                "3A92UG", // Thea
                "9cotLEC", // Laura
                "9QERPZW", // Julie
                "3w5XWTxE3t", // Maria
                "fE8UJcoN", // Lærke
                "3Z8geD6NM2", // Cecilie
                "e3jiZZYV", // Jesper
                "8c7ujQg", // Cille
                "9cosfLp", // Lasse
                "ZbNnoRLP", // Astrid
                "3BeNDE", // Ulla
                "3pc2L4fmoJ", // Joachim
                "3qL2GLen13", // Jørgen
                "DT7eM6UY7GE", // Johannes
                "9PimJu7", // Jakob
                "2vqB3R", // Knud
                "3tt3knWMnB", // Lasse
                "43hxsayMxw", // Peter
                "2yim4E", // Mads
                "test" // testperson
            ];

            const mainContent = document.getElementById("main-content");
            const accessDenied = document.getElementById("access-denied");

            // --- SECURITY CHECK ---

            if (!uid) {
                showAccessDenied();
                return;
            }

            try {
                // Fetch guest list
                const response = await fetch("../assets/guest.json");
                if (!response.ok) throw new Error("JSON not found");

                const guests = await response.json();

                // Verify ID
                if (guests[uid]) {
                    // === ACCESS GRANTED ===

                    // 1. Update Links
                    updateLinks(uid);

                    // 2. Apply Singular/Plural Logic
                    const singularEls = document.querySelectorAll(".dynamic-singular");
                    const pluralEls = document.querySelectorAll(".dynamic-plural");

                    if (singular.includes(uid)) {
                        // Singular Guest: Show "du/din", Hide "I/jeres"
                        singularEls.forEach(el => el.style.display = "block");
                        pluralEls.forEach(el => el.style.display = "none");
                    } else {
                        // Plural Guest: Hide "du/din", Show "I/jeres"
                        singularEls.forEach(el => el.style.display = "none");
                        pluralEls.forEach(el => el.style.display = "block");
                    }

                    // 3. Show Content
                    accessDenied.style.display = "none";
                    mainContent.style.display = "block";

                } else {
                    showAccessDenied();
                }
            } catch (err) {
                console.error("Security verification failed:", err);
                showAccessDenied();
            }

            // --- HELPER FUNCTIONS ---

            function showAccessDenied() {
                mainContent.style.display = "none";
                accessDenied.style.display = "flex";
            }

            function updateLinks(validUid) {
                document.querySelectorAll("a").forEach(link => {
                    const href = link.getAttribute("href");
                    // Skip mailto, external links that aren't ours
                    if (!href || href.startsWith("mailto:") || (href.startsWith("http") && !href.includes("index.html"))) {
                        return;
                    }
                    try {
                        const url = new URL(link.href, window.location.origin);
                        url.searchParams.set("uid", validUid);
                        link.href = url.toString();
                    } catch (e) {
                        console.log("Skipping link:", href);
                    }
                });
            }

            // --- BURGER MENU LOGIC ---
            const burgerToggle = document.getElementById("burger-toggle");
            const navLinks = document.querySelector(".navbar ul");

            if (burgerToggle && navLinks) {
                const closeMenu = () => {
                    navLinks.classList.remove("nav-active");
                    burgerToggle.classList.remove("burger-active");
                };

                const toggleMenu = () => {
                    navLinks.classList.toggle("nav-active");
                    burgerToggle.classList.toggle("burger-active");
                };

                burgerToggle.addEventListener("click", toggleMenu);
                navLinks.addEventListener("click", (e) => {
                    if (e.target === navLinks) {
                        closeMenu();
                    }
                });
            }
        });
    </script>

</body>

</html>
